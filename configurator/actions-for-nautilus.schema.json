{
	"$schema": "http://json-schema.org/draft-06/schema#",
	"$ref": "#/$defs/ActionsForNautilus",
	"description": "The backend configuration for Actions For Nautilus. This is NOT the same as used by the configurator but, instead, describes how the configuration appears on disc and what the actual extension expects",
	"$defs": {
		"ActionsForNautilus": {
			"type": "object",
			"title": "Actions For Nautilus configuration",
			"description": "The root level object of the configuration. Contains the top level menu actions and global options",
			"additionalProperties": false,
			"properties": {
				"actions": {
					"type": "array",
					"title": "Main Menu",
					"description": "The top level menu actions",
					"items": {
						"$ref": "#/$defs/Action"
					}
				},
				"sort": {
					"$ref": "#/$defs/SortStyles"
				},
				"debug": {
					"type": "boolean",
					"title": "Enable debugging output",
					"description": "Whether or not to produce debug console output. Start nautilus as 'nautilus --no-desktop' to see the output"
				}
			},
			"required": [
				"actions"
			]
		},
		"Action": {
			"type": "object",
			"title": "Action",
			"description": "An action may be a Menu or a Command",
			"oneOf": [
				{
					"title": "Command",
					"$ref": "#/$defs/Command"
				},
				{
					"title": "Menu",
					"$ref": "#/$defs/Menu"
				}
			]
		},
		"Menu": {
			"type": "object",
			"title": "Submenu",
			"description": "An Menu action describes a submenu of actions",
			"additionalProperties": false,
			"properties": {
				"type": {
					"type": "string",
					"title": "Menu",
					"description": "An Menu action has a 'type' of 'menu'",
					"const": "menu",
					"default": "menu"
				},
				"disabled": {
					"type": "boolean",
					"title": "Disabled",
					"description": "If true, the submenu appears in the configuration, but is not rendered into the Nautilus context menu"
				},
				"label": {
					"type": "string",
					"title": "Label",
					"description": "The label used to present the menu action in the Nautilus context menu",
					"minLength": 1
				},
				"sort": {
					"$ref": "#/$defs/SortStyles",
					"title": "Submenu sorting",
					"description": "Whether the actions in the submenu should be sorted alphabetically, or left in the order found in the configuration"
				},
				"actions": {
					"type": "array",
					"title": "Submenu Actions",
					"description": "The list of actions to be presented in the Submenu",
					"items": {
						"$ref": "#/$defs/Action"
					}
				}
			},
			"required": [
				"label",
				"type",
				"actions"
			]
		},
		"Command": {
			"type": "object",
			"title": "Command",
			"description": "A Command action describes a system command that should be executed when the action is activated from the Nautilus context menu",
			"additionalProperties": false,
			"properties": {
				"type": {
					"type": "string",
					"title": "Command",
					"description": "An Command action has a 'type' of 'command'",
					"const": "command",
					"default": "command"
				},
				"disabled": {
					"type": "boolean",
					"title": "Disabled",
					"description": "If true, the command appears in the configuration, but is not rendered into the Nautilus context menu"
				},
				"label": {
					"type": "string",
					"title": "Label",
					"description": "The label used to present the command action in the Nautilus context menu",
					"minLength": 1
				},
				"command_line": {
					"type": "string",
					"title": "Command line",
					"description": "The command line to execute when the action is activated from the Nautilus context menu. Can contain placeholders for data items drawn from the current Nautilus file selection",
					"minLength": 1
				},
				"use_v1_interpolation": {
					"type": "boolean",
					"title": "V1 interpolation",
					"description": "Whether or not to use the approach to placeholder interpolation implemented in version 1 of the extension. The default is to use v1 interpolation"
				},
				"show_if_true": {
					"type": "string",
					"title": "Show if true",
					"description": "A command line to execute to establish if the action should be presented in the Nautilus context menu"
				},
				"use_shell": {
					"type": "boolean",
					"title": "Use shell",
					"description": "Whether or not to use the system shell to execute the 'command_line'"
				},
				"cwd": {
					"type": "string",
					"title": "Current working directory",
					"description": "The CWD to set when executing the 'command_line'. Can contain placeholders for data items drawn from the current Nautilus file selection"
				},
				"min_items": {
					"type": "integer",
					"title": "Min items",
					"description": "The minimum number of items in the Nautilus file selection for which this action is eligible",
					"minimum": 1,
					"default": 1
				},
				"max_items": {
					"type": "integer",
					"title": "Max items",
					"description": "The maximum number of items in the Nautilus file selection for which this action is eligible. Zero means unlimlited",
					"minimum": 0,
					"default": 0
				},
				"permissions": {
					"$ref": "#/$defs/Permissions"
				},
				"mimetypes": {
					"type": "array",
					"title": "Mimetypes",
					"description": "The mimetypes of items in the Nautilus file selection for which this action is eligible",
					"items": {
						"$ref": "#/$defs/MimeType"
					}
				},
				"mimetypes_strict_match": {
					"type": "boolean",
					"title": "Strict match",
					"description": "Whether or not all items in the selection must be of the same mimetype in order for the command to be displayed"
				},
				"filetypes": {
					"type": "array",
					"title": "File types",
					"description": "The Gnome filetypes of items in the Nautilus file selection for which this action is eligible",
					"items": {
						"$ref": "#/$defs/FileType"
					}
				},
				"filetypes_strict_match": {
					"type": "boolean",
					"title": "Strict match",
					"description": "Whether or not all items in the selection must be of the same file type in order for the command to be displayed"
				},
				"path_patterns": {
					"type": "array",
					"title": "Path patterns",
					"description": "The path patterns of items in the Nautilus file selection for which this action is eligible. May be expressed as simple glob patterns, or as regular expressions",
					"items": {
						"$ref": "#/$defs/PathPattern"
					}
				},
				"path_patterns_strict_match": {
					"type": "boolean",
					"title": "Strict match",
					"description": "Whether or not all items in the selection must match the same path pattern in order for the command to be displayed"
				}
			},
			"required": [
				"label",
				"type",
				"command_line"
			]
		},
		"MimeType": {
			"type": "string",
			"title": "Mimetype",
			"description": "A standard mimetype expression, including the use of wild cards. The expression can be 'not-ed' by prefixing with '!'",
			"pattern": "^(!?[A-Za-z0-9-]+\\/(([A-Za-z0-9-]+)|\\*))|(\\*)|(\\*\\/\\*)$"
		},
		"PathPattern": {
			"type": "string",
			"title": "Path pattern",
			"description": "A glob pattern or a regular expression (prefixed with 're:') that a file path will be matched against. The expression can be 'not-ed' by prefixing with '!'",
			"format": "pattern"
		},
		"SortStyles": {
			"type": "string",
			"title": "Menu sorting",
			"description": "The supported menu sort styles. Essentially 'sort alphabetically by label' or 'leave as is'",
			"enum": [
				"manual",
				"auto"
			],
			"default": "manual"
		},
		"Permissions": {
			"type": "string",
			"title": "Access permissions",
			"description": "The minimum access permissions that the user must have for a file in the selection. Settings prefixed with '!' indicate that the user must NOT have that permission",
			"enum": [
				"read",
				"read-write",
				"read-execute",
				"read-write-execute",
				"!write",
				"!execute",
				"!write-execute"
			]
		},
		"FileType": {
			"type": "string",
			"title": "File type",
			"description": "The Gnome file types that a file in the selection may have. Settings prefixed with '!' indicate that the file must NOT be of that type",
			"enum": [
				"unknown",
				"file",
				"directory",
				"symbolic-link",
				"special",
				"shortcut",
				"mountable",
				"standard",
				"!unknown",
				"!file",
				"!directory",
				"!symbolic-link",
				"!special",
				"!shortcut",
				"!mountable",
				"!standard"
			]
		}
	}
}